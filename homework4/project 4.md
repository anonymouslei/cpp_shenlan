# 文字版挂机地牢探险游戏的设计[Draft]

## 基本要求

本次作业的目标是设计一个全自动运行并且仅有文字输出的地牢探险游戏，游戏的探索单元以房间为单位，房间具有不同的类型，不同类型的房间会对应不同的房间事件，游戏的主要流程为探险者不断地进入随机生成的房间并完成房间事件，直至探险者死亡。

### 角色属性设定

|       | 探险者     | 怪物    | 怪物首领  |
| ----- | ------- | ----- | ----- |
| 生命/上限 | 100/100 | 10/10 | 40/40 |
| 攻击力   | 10      | 5     | 15    |
| 经验/上限 | 0/10    | -     | -     |

### 房间类型及事件设定

一个房间发生的事件可分为以下几个步骤

进入事件 → 死亡判定 → 战斗事件 → 死亡判定 → 结算

下表列出了每种房间所对应的机关事件和主要事件

|      | 营地         | 普通房间                                      | 陷阱房间                                | 首领房间（扩展一）         | 武器房间（扩展二）                                  |
| ---- | ---------- | ----------------------------------------- | ----------------------------------- | ----------------- | ------------------------------------------ |
| 出现概率 | 10%        | 55%                                       | 15%                                 | 10%               | 10%                                        |
| 进入事件 | 恢复探险者全部的生命 | 10%概率恢复探险者10点生命，并且每进入一个房间恢复5点生命，持续2个房间    | 探险者损失当前10%的生命，并且每次进入房间损失2点生命，持续5个房间 | 恢复20点生命，清除所有负面效果  | 记录冒险者当前的生命值                                |
| 战斗事件 | -          | 随机生成1-3个怪物，每个怪物的属性值为怪物基本属性值的±40%，进行**战斗** | 生成1个属性值为怪物基本属性值的两倍的怪物，进行**战斗**      | 生成一个怪物首领，进行**战斗** | 生成1个属性值为探险者基本属性值0.4倍的怪物，并装备一把随机武器，进行**战斗** |
| 结算   | -          | 每战胜一个怪物获得1点经验                             | 获得1点经验                              | 获得5点经验            | 获得2点经验，恢复探险者进入房间时记录的生命值，并装备怪物的武器           |

发生战斗时，探险者与所有怪物依次轮流攻击，探险者永远最先攻击，并且攻击对象为攻击力最高的怪物，攻击造成的伤害与攻击者的攻击力相等，如果有两个攻击力一样高的怪物，则随机选择一个，如果探险者受到攻击后生命值小于等于0或所有怪物均死亡则战斗结束

如果结算后探险者经验超过了上限则回复全部生命，并将当前经验减去上限作为当前经验值

如果死亡判定时探险者的生命值小于等于0则发生死亡结算，此时你需要输出总共经过的房间数量和每种房间的数量统计



### 输出信息

每当进入房间时你需要显示当前的房间类型

进入战斗时要有提示，并显示怪物信息

探险者的生命、经验发生变化时你需要显示原因、变化的数值、当前值/上限

对战时怪物的生命值发生变化时你需要显示原因、变化的数值、当前值/上限

你在每次输出完成时应该让程序延时一定的时间，否则游戏将在一瞬间结束，你可以使用sleep函数完成延时操作



## 扩展一

怪物首领具有特殊的攻击模式，每当怪物首领发起攻击时，自身攻击力将会提高一点，当怪物首领的生命值低于10时，将会取消当前攻击改为为自己回复20点生命，此效果仅生效一次



## 扩展二

武器具有攻击力，耐久和效果，耐久每攻击一次就会减少一，耐久降为0时武器损坏，其效果作废，如果获得新武器时已经装备了武器，则新武器将取代原有武器，武器共有如下三种：

|     | 武器一 | 武器二          | 武器三                       |
| --- | --- | ------------ | ------------------------- |
| 攻击力 | 4   | 0            | 1                         |
| 耐久  | 6   | 6            | 6                         |
| 效果  | -   | 该武器的攻击力等于其耐久 | 持有该武器攻击时有50%的几率使自身攻击力永久翻倍 |

当探险者装备武器时，对怪物造成的伤害等于武器攻击力加自身攻击力

当获得武器和武器损坏时你需要输出相应的信息



## 示例输出

//此处仅给出一个示范，具体格式可以自行更改

进入陷阱房间

触发事件，损失10点生命，造成持续损伤，当前生命（90/100）

遇到 怪物1（20/20）

战斗开始

探险者攻击怪物1，造成10点伤害，怪物1（10/20）

怪物1攻击探险者，造成5点伤害，探险者（80/100）

探险者攻击怪物1，造成10点伤害，怪物1（0/20）

怪物1死亡

获得1点经验，当前经验（1/10）



进入普通房间

持续损伤效果触发，失去2点生命，当前生命（78/100）

触发事件，回复10点生命，获得持续恢复效果，当前生命（88/100）

遇到 怪物1（10/10） 怪物2（12/12）怪物3（14/14）

战斗开始

探险者攻击怪物3，造成10点伤害，怪物3（4/14）

怪物1攻击探险者，造成5点伤害，探险者（83/100）

怪物2攻击探险者，造成6点伤害，探险者（77/100）

怪物3攻击探险者，造成7点伤害，探险者（70/100）

探险者攻击怪物3，造成10点伤害，怪物3（-6/14）

怪物3死亡

怪物1攻击探险者，造成5点伤害，探险者（65/100）

怪物2攻击探险者，造成6点伤害，探险者（59/100）

探险者攻击怪物2，造成10点伤害，怪物2（2/12）

怪物1攻击探险者，造成5点伤害，探险者（54/100）

怪物2攻击探险者，造成6点伤害，探险者（48/100）

探险者攻击怪物2，造成10点伤害，怪物2（-8/12）

怪物2死亡

怪物1攻击探险者，造成5点伤害，探险者（43/100）

探险者攻击怪物1，造成10点伤害，怪物1（0/10）

怪物1死亡

获得3点经验，当前经验（4/10）



进入武器房间

持续损伤效果触发，失去2点生命，当前生命（41/100）

持续恢复效果触发，获得5点生命，当前生命（46/100）

遇到 怪物1（40/40）

战斗开始

探险者攻击怪物1，造成10点伤害，怪物1（30/40）

怪物1攻击探险者，造成5点伤害，探险者（41/100）

探险者攻击怪物1，造成10点伤害，怪物1（20/40）

怪物1攻击探险者，造成5点伤害，探险者（36/100）

探险者攻击怪物1，造成10点伤害，怪物1（10/40）

怪物1攻击探险者，造成5点伤害，探险者（31/100）

探险者攻击怪物1，造成10点伤害，怪物1（0/40）

怪物1死亡

获得2点经验，当前经验（6/10）

生命恢复，当前生命（46/100）

获得武器三



进入首领房间

持续损伤效果触发，失去2点生命，当前生命（44/100）

持续恢复效果触发，获得5点生命，当前生命（49/100）

生命恢复，当前生命（69/100）

持续损伤效果被移除

遇到 怪物首领（40/40）

探险者攻击怪物首领，造成11点伤害，怪物首领（29/40）

怪物首领攻击探险者，造成15点伤害，探险者（54/100）

探险者攻击怪物首领，造成12点伤害，怪物首领（17/40）

怪物首领攻击探险者，造成16点伤害，探险者（38/100）

探险者攻击怪物首领，造成14点伤害，怪物首领（3/40）

怪物首领恢复生命20点，怪物首领（23/40）

探险者攻击怪物首领，造成14点伤害，怪物首领（9/40）

怪物首领攻击探险者，造成17点伤害，探险者（21/100）

探险者攻击怪物首领，造成14点伤害，怪物首领（-5/40）

怪物首领死亡

获得5点经验，生命恢复，当前生命（100/100），当前经验（1/10）

//假设此时探险者死亡

探险者死亡，共走过4个房间，普通房间：1，陷阱房间：1，武器房间：1，首领房间：1，营地：0
